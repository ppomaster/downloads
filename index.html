<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>TV M3U Mini IPTV</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #0a174e 40%, #133b8a 100%);
            min-height: 100vh;
            color: #fff;
        }
        .main-menu {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 44px;
        }
        .logo-circular {
            width: 86px; height: 86px; border-radius: 50%; 
            background: #207bee;
            margin: 0 auto 25px auto; display: flex; justify-content: center; align-items: center;
        }
        .logo-circular img {
            width: 54px; height: 54px;
        }
        .circle-menu {
            display: flex;
            gap: 8vw;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 25px; margin-bottom: 38px;
        }
        .circle-btn {
            width: 82px; height: 82px;
            background: rgba(255,255,255,0.13);
            border: 4px solid #1082cd;
            border-radius: 50%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            cursor: pointer;
            margin: 5px 8px;
            box-shadow: 0 2px 14px #0b213b27;
            transition: 0.19s;
        }
        .circle-btn:active, .circle-btn:hover {
            background: #21b2fd33;
            border-color: #14e0fc;
            transform: scale(1.07);
        }
        .circle-btn .icon {
            font-size: 2.2rem;
            margin-bottom: 7px;
        }
        .circle-btn span {
            font-size: 1.05rem;
            font-weight: 500;
            color: #e8fcff;
            margin-top: 3px;
        }
        .footer-iptv {
            position: fixed;
            left:0; right:0; bottom:0; padding: 13px 0 8px 0;
            background: #151e45c0;
            color: #95bfff;
            text-align: center;
            font-size: 0.99rem;
            letter-spacing: 0.01em;
        }
        /* Mobile responsive */
        @media (max-width: 600px) {
            .circle-menu { gap: 4vw;}
            .circle-btn { width:60px;height:60px;}
            .circle-btn .icon { font-size:1.36rem;}
            .logo-circular { width:56px; height:56px;}
            .logo-circular img { width:32px; height:32px;}
        }
    </style>
</head>
<body>
    <div class="main-menu">
        <div class="logo-circular">
            <img src="https://img.icons8.com/color/80/000000/movie-projector.png" alt="Logo" />
        </div>
        <div class="circle-menu">
            <div class="circle-btn" onclick="abrirSecao('livetv')">
                <div class="icon">ðŸ“º</div>
                <span>LIVE TV</span>
            </div>
            <div class="circle-btn" onclick="abrirSecao('epg')">
                <div class="icon">ðŸ“…</div>
                <span>EPG</span>
            </div>
            <div class="circle-btn" onclick="abrirSecao('vod')">
                <div class="icon">ðŸŽ¬</div>
                <span>VOD</span>
            </div>
            <div class="circle-btn" onclick="abrirSecao('series')">
                <div class="icon">ðŸ“‚</div>
                <span>SERIES</span>
            </div>
        </div>
        <div id="app"></div>
    </div>
    <div class="footer-iptv">
        &#x1F4FA; App IPTV demo leve &bull; Funciona atÃ© em 1GB RAM &bull; Feito para vocÃª!
    </div>
    <script>
        function abrirSecao(secao) {
            const app = document.getElementById('app');
            app.innerHTML = '<div style="margin:40px 0;text-align:center;color:#73d6fd;">Carregando '+secao.toUpperCase()+'...</div>';
            // Aqui comeÃ§a o lazy load para cada seÃ§Ã£o:
            // O cÃ³digo detalhado de cada bloco (exibir categoria, buscar lista, paginar, abrir modal detalhes)
            // serÃ¡ carregado ou montado sob demanda quando o usuÃ¡rio clicar!
            // Exemplo:
            setTimeout(() => {
                app.innerHTML = `<div style="max-width:450px;margin:0 auto;">
                    <input style="width:100%;padding:12px 8px;border-radius:8px;border:1px solid #128bdf;margin-bottom:13px;" 
                        placeholder="Cole aqui o link da lista M3U..." id="iptvlink${secao}" />
                    <button onclick="carregarLista('${secao}')" style="padding:10px 35px;background:#207bee;color:#fff;
                    border:none; border-radius:5px;font-size:1rem;font-weight:600;cursor:pointer;">CARREGAR</button>
                    <div id="listagem-${secao}" style="margin-top:20px;"></div>
                </div>`;
            }, 500);
        }

        function carregarLista(secao) {
            const url = document.getElementById("iptvlink"+secao).value.trim();
            const saida = document.getElementById("listagem-"+secao);
            if (!url) { saida.innerHTML = '<div style="color:#ed5555;">Digite uma URL vÃ¡lida.</div>'; return;}
            saida.innerHTML = '<div style="color:#28d0ff;">Baixando lista...</div>';
            fetch(url)
                .then(resp=>resp.text())
                .then(texto=>{
                    // Aqui vocÃª pode: 1) Processar o M3U para pegar sÃ³ categorias e nomes (nÃ£o processar tudo!), 2) Mostrar sÃ³ as primeiras 15 entradas
                    const items = [];
                    let cur = null;
                    texto.split('\n').forEach(l=>{
                        l=l.trim();
                        if(l.startsWith('#EXTINF:')) {
                            cur={nome:l.split(',').pop().trim()}; 
                        } else if(cur && l && !l.startsWith('#')) {
                            cur.url=l; 
                            items.push(cur);
                            cur=null;
                        }
                    });
                    // PaginaÃ§Ã£o (leve)
                    let pagina=0, porPag=15;
                    function renderPag(pag) {
                        saida.innerHTML = items.slice(pag*porPag,(pag+1)*porPag).map((it,i)=>
                            `<div style='background:#fff1;padding:8px 6px;margin:8px 0;
                            border-radius:6px;color:#124;'>${it.nome}
                                <button onclick="tocarStream('${it.url.replace(/'/g,"")}', '${it.nome.replace(/'/g,"")}', this)" 
                                style="float:right;padding:3px 13px;background:#128bdf;color:#fff;border:none;border-radius:4px">â–¶ï¸Ž</button>
                            </div>`).join('');
                        if((pag+1)*porPag<items.length) 
                            saida.innerHTML+='<div style="text-align:center;"><button onclick="('+renderPag+').call(this,'+(pag+1)+')" style="margin-top:9px;background:#1761d6;color:#fff;padding:7px 30px;border:none;border-radius:7px;">MAIS</button></div>';
                    }
                    renderPag(0);
                })
                .catch(()=>{saida.innerHTML='<span style="color:#d23;">Falha ao baixar/processar lista.</span>';});
        }

        function tocarStream(url, nome, btn) {
            // Monta player leve na tela, removendo anterior
            let p = document.getElementById('player-iptv-app');
            if (p) p.remove();
            let src = url.startsWith('http') ? url : '';
            const tag = document.createElement('div');
            tag.id = 'player-iptv-app';
            tag.innerHTML = `<div style="background:#06193B;padding:14px;border-radius:8px;margin:17px 0;">
                    <b style="color:#80c6fa;">${nome}</b><br>
                    <video controls autoplay style="width:97%;background:#000;border-radius:8px;margin-top:8px;max-height:38vh;">
                        <source src="${src}">
                        NÃ£o suportado.
                    </video>
                </div>`;
            btn.parentNode.parentNode.appendChild(tag);
        }
    </script>
</body>
</html>
